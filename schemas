CREATE TABLE chats (
  chat_id UUID PRIMARY KEY,
  user_id TEXT,
  created_at TIMESTAMP DEFAULT NOW()
);


CREATE TABLE messages (
  message_id UUID PRIMARY KEY,
  chat_id UUID REFERENCES chats(chat_id) ON DELETE CASCADE,
  sender TEXT CHECK (sender IN ('user', 'assistant')),
  content TEXT NOT NULL,
  timestamp TIMESTAMP DEFAULT NOW()
);


CREATE TABLE web_chunks (
  chunk_id UUID PRIMARY KEY,
  url TEXT,              -- original webpage
  page_title TEXT,       -- optional
  chunk_index INT,       -- which part of the page this is
  content TEXT,          -- the actual text of the chunk
  embedding VECTOR(1536) -- pgvector embedding
);

